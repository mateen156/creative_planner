{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{hmWn:function(e,t,c){\"use strict\";c.r(t),c.d(t,\"ActionToProjectModule\",(function(){return g}));var i=c(\"ofXK\"),n=c(\"3Pt+\"),o=c(\"tyNb\"),s=c(\"ZE33\"),r=c(\"Eu0l\"),a=c(\"fXoL\"),l=c(\"tHiJ\"),d=c(\"ps0H\"),b=c(\"6i5P\"),h=c(\"Egam\"),u=c(\"iadO\");const m=[{path:\"\",component:(()=>{class e{constructor(e,t,c,i){this.service=e,this.notifyService=t,this.router=c,this.BsService=i,this.selectedEmpNo=null,this._MainPrjectName=null,this.dropdownSettings_EMP={},this.disablePreviousDate=new Date,this._EmployeeListForDropdown=[],this.selectedProjectCodelist=[],this.dropdownSettings_Projects={},this.selected_Employee=[],this.CurrentUser_ID=localStorage.getItem(\"EmpNo\"),this.ObjSubTaskDTO=new s.a,this.ObjUserDetails=new r.a,this.disablePreviousDate.setDate(this.disablePreviousDate.getDate()),this.BsService.bs_projectCode.subscribe(e=>this._MasterCode=e),this.BsService.bs_ProjectName.subscribe(e=>this._MainPrjectName=e)}ngOnInit(){this.GetAllEmployeesForAssignDropdown()}GetAllEmployeesForAssignDropdown(){this.service._GetCompletedProjects({pagenumber:1,Emp_No:this.CurrentUser_ID,Mode:\"AssignedTask\"}).subscribe(e=>{this._EmployeeListForDropdown=JSON.parse(e[0].EmployeeList),this.dropdownSettings_EMP={searchAutofocus:!0,singleSelection:!0,idField:\"Emp_No\",textField:\"DisplayName\",itemsShowLimit:2,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}onFilterChange(e){this.filterText=e,this.GetProjectsByUserName()}ProjectOnSelect(e){this.selectedProjectCode=e.Project_Code}ProjectOnDeselect(e){this.selectedProjectCode=\"\"}GetProjectsByUserName(){this.ObjUserDetails.PageNumber=1,this.ObjUserDetails.PageSize=30,this.ObjUserDetails.SearchText=this.filterText,this.service.GetProjectsForRunwayTaskDropdown(this.ObjUserDetails).subscribe(e=>{this._ProjectDataList=JSON.parse(e[0].DropdownProjects_Json),this.dropdownSettings_Projects={singleSelection:!0,idField:\"Project_Code\",textField:\"Project_Name\",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,clearSearchFilter:!0,searchPlaceholderText:\"Search by project name\",maxHeight:\"500px\",allowRemoteDataSearch:!0,noDataAvailablePlaceholderText:\"Please wait..\"}})}onFileChangeATP(e){this._inputAttachments=e.target.files[0].name}EmployeeOnSelect(e){this.selectedEmpNo=e.Emp_No}EmployeeOnDeselect(e){this.selectedEmpNo=null}OnSubmit(){if(\"\"==this.Sub_ProjectName||null==this._StartDate||null==this._EndDate)this.notifyService.showInfo(\"\",\"Star(*) mark feilds required \");else{this.ObjSubTaskDTO.MasterCode=this._MasterCode,this.ObjSubTaskDTO.SubProject_Name=this.Sub_ProjectName,this.ObjSubTaskDTO.SubtaskDescription=this._Description,this.ObjSubTaskDTO.ProjectBlock=this.ProjectBlock,this.ObjSubTaskDTO.StartDate=this._StartDate,this.ObjSubTaskDTO.SubProject_DeadLine=this._EndDate;var e=this._StartDate.getTime()-this._EndDate.getTime();this.ObjSubTaskDTO.Duration=-e/864e5,this.ObjSubTaskDTO.Duration=8*this.ObjSubTaskDTO.Duration/1,this.ObjSubTaskDTO.Emp_No=this.CurrentUser_ID,this.ObjSubTaskDTO.AssignTo=this.selectedEmpNo,this.ObjSubTaskDTO.Remarks=this._remarks,this.ObjSubTaskDTO.Attachments=this._inputAttachments,this.service._InsertNewSubtask(this.ObjSubTaskDTO).subscribe(e=>{this.notifyService.showInfo(\"Created Successfully\",\"Action\"),this.router.navigate([this.router.url]),this.closeInfo()})}}closeInfo(){sessionStorage.removeItem(\"Session_MasterCode\"),document.getElementById(\"mysideInfobar\").style.width=\"0\",document.getElementById(\"rightbar-overlay\").style.display=\"none\",document.getElementById(\"mysideInfobar_Update\").style.width=\"0\",document.getElementById(\"mysideInfobar_NewSubtask\").style.width=\"0\",document.getElementById(\"mysideInfobar_ProjectsUpdate\").style.width=\"0\",this.Clear_Feilds()}Clear_Feilds(){this.Sub_ProjectName=\"\",this._Description=\"\",this._StartDate=null,this._EndDate=null,this._remarks=\"\",this._inputAttachments=null,this._inputAttachments2=null,this.selectedEmpNo=\"\",this.selected_Employee=[]}}return e.\\u0275fac=function(t){return new(t||e)(a.Wb(l.a),a.Wb(d.a),a.Wb(o.f),a.Wb(b.a))},e.\\u0275cmp=a.Qb({type:e,selectors:[[\"app-action-to-project\"]],decls:51,vars:17,consts:[[\"id\",\"mysideInfobar_NewSubtask\",1,\"sideInfobar\",\"animate-right\",\"offcanvas\"],[1,\"p-4\"],[1,\"offcanvas-header\",\"d-flex\",\"align-items-center\",\"justify-content-between\",\"pb-2\",\"mb-3\",\"brdr-b\"],[\"href\",\"javascript:void(0)\",1,\"btn\",\"btn-sm\",\"btn-icon\",\"btn-hover-primary\",\"closebtn\",3,\"click\"],[1,\"fa\",\"fa-times\"],[1,\"font-weight-bold\",\"m-0\"],[1,\"pro-nm\",\"text-info\",\"mb-2\"],[1,\"form-group\"],[1,\"text-danger\"],[\"type\",\"text\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"form-control\",2,\"height\",\"139px\",3,\"ngModel\",\"ngModelChange\"],[\"autofocus\",\"true\",3,\"placeholder\",\"settings\",\"data\",\"ngModel\",\"ngModelChange\",\"onSelect\",\"onDeSelect\"],[1,\"input-group\"],[\"matInput\",\"\",\"placeholder\",\"Start Date\",1,\"form-control\",3,\"matDatepicker\",\"min\",\"ngModel\",\"click\",\"ngModelChange\"],[1,\"input-group-text\",\"p-0\"],[\"matSuffix\",\"\",3,\"for\"],[\"picker1\",\"\"],[\"matInput\",\"\",\"placeholder\",\"End Date\",1,\"form-control\",3,\"matDatepicker\",\"min\",\"ngModel\",\"click\",\"ngModelChange\"],[\"picker2\",\"\"],[\"for\",\"exampleFormControlFile1\"],[\"aria-label\",\"With textarea\",1,\"form-control\",2,\"height\",\"111px\",3,\"ngModel\",\"ngModelChange\"],[1,\"custom-file\",\"pl-1\"],[\"type\",\"file\",\"id\",\"uploadFile\",\"accept\",\"application/pdf\",1,\"form-control-file\",3,\"change\"],[1,\"form-group\",\"mb-1\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",3,\"disabled\",\"click\"]],template:function(e,t){if(1&e){const e=a.dc();a.cc(0,\"div\",0),a.cc(1,\"div\",1),a.cc(2,\"div\",2),a.cc(3,\"a\",3),a.nc(\"click\",(function(){return t.closeInfo()})),a.Xb(4,\"i\",4),a.bc(),a.cc(5,\"h3\",5),a.Wc(6,\"Action To Project\"),a.bc(),a.bc(),a.cc(7,\"h6\",6),a.Wc(8),a.bc(),a.cc(9,\"div\",7),a.cc(10,\"label\"),a.Wc(11,\" Action Name \"),a.cc(12,\"span\",8),a.Wc(13,\"*\"),a.bc(),a.bc(),a.cc(14,\"input\",9),a.nc(\"ngModelChange\",(function(e){return t.Sub_ProjectName=e})),a.bc(),a.bc(),a.cc(15,\"div\",7),a.cc(16,\"label\"),a.Wc(17,\"Description\"),a.bc(),a.cc(18,\"textarea\",10),a.nc(\"ngModelChange\",(function(e){return t._Description=e})),a.bc(),a.bc(),a.cc(19,\"div\",7),a.cc(20,\"label\"),a.Wc(21,\" Assign To \"),a.cc(22,\"span\",8),a.Wc(23,\"*\"),a.bc(),a.Wc(24,\" : \"),a.Xb(25,\"strong\"),a.bc(),a.cc(26,\"ng-multiselect-dropdown\",11),a.nc(\"ngModelChange\",(function(e){return t.selected_Employee=e}))(\"onSelect\",(function(e){return t.EmployeeOnSelect(e)}))(\"onDeSelect\",(function(e){return t.EmployeeOnDeselect(e)})),a.bc(),a.bc(),a.cc(27,\"div\",7),a.cc(28,\"div\",12),a.cc(29,\"input\",13),a.nc(\"click\",(function(){return a.Lc(e),a.Ic(33).open()}))(\"ngModelChange\",(function(e){return t._StartDate=e})),a.bc(),a.cc(30,\"div\",14),a.Xb(31,\"mat-datepicker-toggle\",15),a.Xb(32,\"mat-datepicker\",null,16),a.bc(),a.bc(),a.bc(),a.cc(34,\"div\",7),a.cc(35,\"div\",12),a.cc(36,\"input\",17),a.nc(\"click\",(function(){return a.Lc(e),a.Ic(40).open()}))(\"ngModelChange\",(function(e){return t._EndDate=e})),a.bc(),a.cc(37,\"div\",14),a.Xb(38,\"mat-datepicker-toggle\",15),a.Xb(39,\"mat-datepicker\",null,18),a.bc(),a.bc(),a.bc(),a.cc(41,\"div\",7),a.cc(42,\"label\",19),a.Wc(43,\"Remarks\"),a.bc(),a.cc(44,\"textarea\",20),a.nc(\"ngModelChange\",(function(e){return t._remarks=e})),a.bc(),a.bc(),a.cc(45,\"div\",7),a.cc(46,\"div\",21),a.cc(47,\"input\",22),a.nc(\"change\",(function(e){return t.onFileChangeATP(e)})),a.bc(),a.bc(),a.bc(),a.cc(48,\"div\",23),a.cc(49,\"button\",24),a.nc(\"click\",(function(){return t.OnSubmit()})),a.Wc(50,\"Submit \"),a.bc(),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.Ic(33),c=a.Ic(40);a.Jb(8),a.Xc(t._MainPrjectName),a.Jb(6),a.yc(\"ngModel\",t.Sub_ProjectName),a.Jb(4),a.yc(\"ngModel\",t._Description),a.Jb(8),a.yc(\"placeholder\",\"Select Employee\")(\"settings\",t.dropdownSettings_EMP)(\"data\",t._EmployeeListForDropdown)(\"ngModel\",t.selected_Employee),a.Jb(3),a.yc(\"matDatepicker\",e)(\"min\",t.disablePreviousDate)(\"ngModel\",t._StartDate),a.Jb(2),a.yc(\"for\",e),a.Jb(5),a.yc(\"matDatepicker\",c)(\"min\",t.disablePreviousDate)(\"ngModel\",t._EndDate),a.Jb(2),a.yc(\"for\",c),a.Jb(6),a.yc(\"ngModel\",t._remarks),a.Jb(5),a.yc(\"disabled\",\"\"==t.Sub_ProjectName||null==t._StartDate||null==t._EndDate||\"\"==t.selectedEmpNo)}},directives:[n.d,n.u,n.n,n.q,h.a,u.b,u.d,u.a],styles:[\"\"]}),e})()}];let p=(()=>{class e{}return e.\\u0275mod=a.Ub({type:e}),e.\\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(m)],o.i]}),e})(),g=(()=>{class e{}return e.\\u0275mod=a.Ub({type:e}),e.\\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[i.c,p,h.b,n.j,n.t,u.c]]}),e})()}}]);","extractedComments":[]}