{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{viUt:function(e,t,c){\"use strict\";c.r(t),c.d(t,\"ActionToAssignModule\",(function(){return k}));var s=c(\"ofXK\"),i=c(\"3Pt+\"),n=c(\"tyNb\"),a=c(\"UuEW\"),o=c(\"XN+D\"),r=c(\"fXoL\"),l=c(\"ps0H\"),d=c(\"tHiJ\"),p=c(\"FKr1\"),b=c(\"6i5P\"),h=c(\"d3UM\"),m=c(\"Egam\"),g=c(\"iadO\"),u=c(\"kmnG\");function y(e,t){if(1&e&&(r.cc(0,\"mat-option\",22),r.Xc(1),r.bc()),2&e){const e=t.$implicit;r.yc(\"value\",e.Exec_BlockNo),r.Jb(1),r.Zc(\" \",e.Exec_BlockName,\" \")}}const _=[{path:\"\",component:(()=>{class e{constructor(e,t,c,s){this.notifyService=e,this.ProjectTypeService=t,this.dateAdapter=c,this.BsService=s,this.selectedProjectType=\"\",this._description=\"\",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo=\"\",this.disablePreviousDate=new Date,this._taskName=\"\",this.dropdownSettings_Employee={},this.txtdisabled=!1,this.buttondisable=!0,this._remarks=\"\",this._inputAttachments=[],this.selectedFile=null,this.typeoftask=\"\",this.selectedEmployee=\"\",this._ObjAssigntaskDTO=new a.a,this._ObjCompletedProj=new o.a,this.BsService.bs_AssignId.subscribe(e=>this.task_id=e),this.BsService.bs_TaskName.subscribe(e=>{this._taskName=e,null==this._taskName?(this.txtdisabled=!1,this._taskName=null):this.txtdisabled=!0}),this._inputAttachments=[]}ngOnInit(){this.CurrentUser_ID=localStorage.getItem(\"EmpNo\"),this.getProjectTypeList(),this.GetAssignFormEmployeeDropdownList()}getProjectTypeList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode=\"AssignedTask\",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.ProjectTypelist=JSON.parse(e[0].ProjectTypeList)})}EmployeeOnSelect(e){this._SelectedEmpNo=e.Emp_No,this.selectedEmployee=this._SelectedEmpNo}EmployeeOnDeselect(e){this._SelectedEmpNo=null,this.selectedEmployee=this._SelectedEmpNo}onFileChangeATP(e){this._inputAttachments=[...this._inputAttachments,{FileName:e.target.files[0].name,Size:e.target.files[0].size,Files:e.target.files[0]}]}OnAssignTask_Submit(){this._ObjAssigntaskDTO.TaskName=this._taskName,this._ObjAssigntaskDTO.TaskDescription=this._description,this._ObjAssigntaskDTO.StartDate=this._StartDate,this._ObjAssigntaskDTO.EndDate=this._EndDate;var e=this._StartDate.getTime()-this._EndDate.getTime();this._ObjAssigntaskDTO.ProjectDays=-e/864e5,this.BsService.bs_TypeofTask.subscribe(e=>{this.typeoftask=e}),this._ObjAssigntaskDTO.TypeOfTask=this.typeoftask,this._ObjAssigntaskDTO.AssignTo=this.selectedEmployee,this._ObjAssigntaskDTO.Assigned_By=this.CurrentUser_ID,this._ObjAssigntaskDTO.AssignId=this.task_id,this._ObjAssigntaskDTO.ProjectType=this.selectedProjectType,this._ObjAssigntaskDTO.Remarks=this._remarks,this._inputAttachments.length>0&&(this._ObjAssigntaskDTO.Reference=this._inputAttachments[0].Files);var t=new Date(this._StartDate).toUTCString(),c=new Date(this._EndDate).toUTCString();const s=new FormData;s.append(\"AssignTo\",this._ObjAssigntaskDTO.AssignTo),this._inputAttachments.length>0?(s.append(\"Attachment\",\"true\"),s.append(\"file\",this._inputAttachments[0].Files)):(s.append(\"Attachment\",\"false\"),s.append(\"file\",\"\")),s.append(\"TaskName\",this._taskName),s.append(\"Desc\",this._description),s.append(\"StartDate\",t),s.append(\"EndDate\",c),s.append(\"ProjectDays\",this._ObjAssigntaskDTO.ProjectDays.toString()),s.append(\"TypeofTask\",this.typeoftask),s.append(\"Remarks\",this._remarks),s.append(\"ProjectType\",this.selectedProjectType),null!=this.task_id&&s.append(\"AssignId\",this.task_id.toString()),s.append(\"AssignedBy\",this.CurrentUser_ID),this.ProjectTypeService._InsertAssignTaskServie(s).subscribe(e=>{this.notifyService.showSuccess(\"Task sent to assign projects\",e.Message),this.clearFeilds(),this.closeInfo()})}closeInfo(){document.getElementById(\"mysideInfobar\").style.width=\"0px\",document.getElementById(\"rightbar-overlay\").style.display=\"none\",this.clearFeilds()}clearFeilds(){this._description=\"\",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo=\"\",this.selectedProjectType=null,this.selectedProjectCode=\"\",this.SelectedEmplList=[],this.selectedProjectCodelist=[]}GetAssignFormEmployeeDropdownList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode=\"AssignedTask\",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.EmployeeList=JSON.parse(e[0].EmployeeList),this.dropdownSettings_Employee={singleSelection:!0,idField:\"Emp_No\",textField:\"DisplayName\",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}}return e.\\u0275fac=function(t){return new(t||e)(r.Wb(l.a),r.Wb(d.a),r.Wb(p.c),r.Wb(b.a))},e.\\u0275cmp=r.Qb({type:e,selectors:[[\"app-action-to-assign\"]],decls:83,vars:27,consts:[[\"id\",\"mysideInfobar\",1,\"sideInfobar\",\"animate-right\",\"offcanvas\"],[1,\"p-4\"],[\"kt-hidden-height\",\"40\",1,\"offcanvas-header\",\"d-flex\",\"align-items-center\",\"justify-content-between\",\"pb-5\"],[1,\"font-weight-bold\",\"m-0\"],[\"href\",\"javascript:void(0)\",1,\"btn\",\"btn-xs\",\"btn-icon\",\"btn-hover-primary\",3,\"click\"],[1,\"fa\",\"fa-times\"],[1,\"form-group\"],[1,\"text-danger\"],[\"placeholder\",\"Select Project Type\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"type\",\"text\",\"placeholder\",\"Enter Task Name\",\"aria-describedby\",\"basic-addon1\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"aria-describedby\",\"basic-addon1\",1,\"form-control\",2,\"height\",\"139px\",3,\"ngModel\",\"ngModelChange\"],[3,\"placeholder\",\"settings\",\"data\",\"ngModel\",\"ngModelChange\",\"onSelect\",\"onDeSelect\"],[1,\"input-group\"],[\"matInput\",\"\",\"placeholder\",\"Start Date\",1,\"form-control\",3,\"matDatepicker\",\"min\",\"ngModel\",\"click\",\"ngModelChange\"],[1,\"input-group-text\",\"p-0\"],[\"matSuffix\",\"\",3,\"for\"],[\"picker1\",\"\"],[\"matInput\",\"\",\"placeholder\",\"End Date\",1,\"form-control\",3,\"matDatepicker\",\"min\",\"ngModel\",\"click\",\"ngModelChange\"],[\"picker2\",\"\"],[1,\"form-group\",3,\"hidden\"],[\"name\",\"Select Type\",\"placeholder\",\"Submission Type\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[3,\"value\"],[\"for\",\"exampleFormControlFile1\"],[\"aria-label\",\"With textarea\",1,\"form-control\",2,\"height\",\"111px\",3,\"ngModel\",\"ngModelChange\"],[1,\"custom-file\",\"pl-1\"],[\"type\",\"file\",\"id\",\"uploadFile\",\"accept\",\"application/pdf\",1,\"form-control-file\",3,\"change\"],[1,\"form-group\",\"mb-1\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",2,\"width\",\"150px\",3,\"disabled\",\"click\"]],template:function(e,t){if(1&e){const e=r.dc();r.cc(0,\"div\",0),r.cc(1,\"div\",1),r.cc(2,\"div\",2),r.cc(3,\"h3\",3),r.Xc(4,\"Assign Task/Project\"),r.bc(),r.cc(5,\"a\",4),r.nc(\"click\",(function(){return t.closeInfo()})),r.Xb(6,\"i\",5),r.bc(),r.bc(),r.cc(7,\"div\",6),r.cc(8,\"label\"),r.Xc(9,\"Project Type : \"),r.cc(10,\"span\",7),r.Xc(11,\"*\"),r.bc(),r.bc(),r.cc(12,\"mat-select\",8),r.nc(\"ngModelChange\",(function(e){return t.selectedProjectType=e})),r.Vc(13,y,2,2,\"mat-option\",9),r.bc(),r.bc(),r.cc(14,\"div\",6),r.cc(15,\"label\"),r.Xc(16,\" Task/Project Name : \"),r.cc(17,\"span\",7),r.Xc(18,\"*\"),r.bc(),r.bc(),r.cc(19,\"input\",10),r.nc(\"ngModelChange\",(function(e){return t._taskName=e})),r.bc(),r.bc(),r.cc(20,\"div\",6),r.cc(21,\"label\"),r.Xc(22,\"Description : \"),r.cc(23,\"span\",7),r.Xc(24,\"*\"),r.bc(),r.bc(),r.cc(25,\"textarea\",11),r.nc(\"ngModelChange\",(function(e){return t._description=e})),r.bc(),r.bc(),r.cc(26,\"div\",6),r.cc(27,\"label\"),r.Xc(28,\"Assign To : \"),r.Xb(29,\"strong\"),r.cc(30,\"span\",7),r.Xc(31,\"*\"),r.bc(),r.bc(),r.cc(32,\"ng-multiselect-dropdown\",12),r.nc(\"ngModelChange\",(function(e){return t.SelectedEmplList=e}))(\"onSelect\",(function(e){return t.EmployeeOnSelect(e)}))(\"onDeSelect\",(function(e){return t.EmployeeOnDeselect(e)})),r.bc(),r.bc(),r.cc(33,\"div\",6),r.cc(34,\"label\"),r.Xc(35,\"Start Date : \"),r.cc(36,\"span\",7),r.Xc(37,\"*\"),r.bc(),r.bc(),r.cc(38,\"div\",13),r.cc(39,\"input\",14),r.nc(\"click\",(function(){return r.Mc(e),r.Jc(43).open()}))(\"ngModelChange\",(function(e){return t._StartDate=e})),r.bc(),r.cc(40,\"div\",15),r.Xb(41,\"mat-datepicker-toggle\",16),r.Xb(42,\"mat-datepicker\",null,17),r.bc(),r.bc(),r.bc(),r.cc(44,\"div\",6),r.cc(45,\"label\"),r.Xc(46,\"End Date :\"),r.cc(47,\"span\",7),r.Xc(48,\"*\"),r.bc(),r.bc(),r.cc(49,\"div\",13),r.cc(50,\"input\",18),r.nc(\"click\",(function(){return r.Mc(e),r.Jc(54).open()}))(\"ngModelChange\",(function(e){return t._EndDate=e})),r.bc(),r.cc(51,\"div\",15),r.Xb(52,\"mat-datepicker-toggle\",16),r.Xb(53,\"mat-datepicker\",null,19),r.bc(),r.bc(),r.bc(),r.cc(55,\"div\",20),r.cc(56,\"mat-select\",21),r.nc(\"ngModelChange\",(function(e){return t.SelectedSubmissionType=e})),r.cc(57,\"mat-option\",22),r.Xc(58,\"Select Type\"),r.bc(),r.cc(59,\"mat-option\",22),r.Xc(60,\"Daily\"),r.bc(),r.cc(61,\"mat-option\",22),r.Xc(62,\"Weekly\"),r.bc(),r.cc(63,\"mat-option\",22),r.Xc(64,\"Monthly\"),r.bc(),r.cc(65,\"mat-option\",22),r.Xc(66,\"Quarterly\"),r.bc(),r.cc(67,\"mat-option\",22),r.Xc(68,\"HalfYearly\"),r.bc(),r.cc(69,\"mat-option\",22),r.Xc(70,\"Annually\"),r.bc(),r.bc(),r.bc(),r.cc(71,\"div\",6),r.cc(72,\"label\",23),r.Xc(73,\"Remarks\"),r.bc(),r.cc(74,\"textarea\",24),r.nc(\"ngModelChange\",(function(e){return t._remarks=e})),r.bc(),r.bc(),r.cc(75,\"div\",6),r.cc(76,\"div\",25),r.cc(77,\"label\",23),r.Xc(78,\"Reference\"),r.bc(),r.cc(79,\"input\",26),r.nc(\"change\",(function(e){return t.onFileChangeATP(e)})),r.bc(),r.bc(),r.bc(),r.cc(80,\"div\",27),r.cc(81,\"button\",28),r.nc(\"click\",(function(){return t.OnAssignTask_Submit()})),r.Xc(82,\"Submit \"),r.bc(),r.bc(),r.bc(),r.bc()}if(2&e){const e=r.Jc(43),c=r.Jc(54);r.Jb(12),r.yc(\"ngModel\",t.selectedProjectType),r.Jb(1),r.yc(\"ngForOf\",t.ProjectTypelist),r.Jb(6),r.yc(\"ngModel\",t._taskName),r.Jb(6),r.yc(\"ngModel\",t._description),r.Jb(7),r.yc(\"placeholder\",\"Select Employee\")(\"settings\",t.dropdownSettings_Employee)(\"data\",t.EmployeeList)(\"ngModel\",t.SelectedEmplList),r.Jb(7),r.yc(\"matDatepicker\",e)(\"min\",t.disablePreviousDate)(\"ngModel\",t._StartDate),r.Jb(2),r.yc(\"for\",e),r.Jb(9),r.yc(\"matDatepicker\",c)(\"min\",t.disablePreviousDate)(\"ngModel\",t._EndDate),r.Jb(2),r.yc(\"for\",c),r.Jb(3),r.yc(\"hidden\",\"003\"!=t.selectedProjectType),r.Jb(1),r.yc(\"ngModel\",t.SelectedSubmissionType),r.Jb(1),r.yc(\"value\",0),r.Jb(2),r.yc(\"value\",1),r.Jb(2),r.yc(\"value\",2),r.Jb(2),r.yc(\"value\",4),r.Jb(2),r.yc(\"value\",8),r.Jb(2),r.yc(\"value\",10),r.Jb(2),r.yc(\"value\",16),r.Jb(5),r.yc(\"ngModel\",t._remarks),r.Jb(7),r.yc(\"disabled\",!(t.selectedProjectType&&t._description&&t._taskName&&t.SelectedEmplList&&t._StartDate&&t._EndDate))}},directives:[h.a,i.n,i.q,s.n,i.d,m.a,g.b,g.d,u.e,g.a,p.n],styles:[\"\"]}),e})()}];let f=(()=>{class e{}return e.\\u0275mod=r.Ub({type:e}),e.\\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(_)],n.i]}),e})(),k=(()=>{class e{}return e.\\u0275mod=r.Ub({type:e}),e.\\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[s.c,f,m.b,i.j,i.t,g.c,h.b]]}),e})()}}]);","extractedComments":[]}